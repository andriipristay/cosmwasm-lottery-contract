#!/usr/bin/bash
#
# copy compiled wasm target to docker container running juno local dev validator
# and deploy it.

# copy wasm artifact to container
wasm_artifact_path=$1
docker cp $wasm_artifact_path juno_node_1:/$(basename $wasm_artifact_path)

# deploy wasm artifact to appropriate network
network=$2
case $network in
    mainnet)
        # TODO
        ;;
    testnet)
        # TODO
        ;;
    *)
        # deploy to local validator running in docker
        docker exec -i juno_node_1 \
          junod tx wasm store "/$(basename $wasm_artifact_path)" \
          --gas-prices 0.1ujunox \
          --gas auto \
          --gas-adjustment 1.3 \
          --chain-id testing \
          --from validator --output json \
          -b block \
          -y
        ;;
esac
